<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>ProdyScan</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
</head>

<body>
<div class="app">

  <!-- HEADER -->
  <header class="app-header">
    <div class="logo-circle">P</div>
    <div><h1>ProdyScan</h1></div>
  </header>

  <!-- MAIN -->
      <main class="app-main">
        <!-- Carte principale : onglets + image ou URL + param√®tres -->
        <section class="card">
          <!-- üîò Onglets de mode -->
          <div class="mode-tabs">
            <button
              id="mode-image-btn"
              type="button"
              class="mode-btn active"
            >
              üîç Recherche par image
            </button>

            <button
              id="mode-url-btn"
              type="button"
              class="mode-btn"
            >
              üîó Recherche par lien (URL)
            </button>
          </div>

          <!-- üñºÔ∏è Bloc IMAGE (par d√©faut) -->
          <div id="block-image">
            <h2>Choisir ou prendre une photo</h2>
            <p class="hint">
              Pour de meilleurs r√©sultats, utilisez une photo claire et bien visible du produit.
            </p>

            <!-- Bouton image -->
            <button id="choose-btn" type="button" class="primary-btn">
              Choisir / Prendre une photo
            </button>

            <!-- Nom du fichier -->
            <p id="file-name" class="file-name">Aucune image s√©lectionn√©e</p>

            <!-- Input fichier cach√© -->
            <input id="file-input" type="file" accept="image/*" hidden />

            <!-- Aper√ßu image -->
            <div id="preview-wrapper" class="preview-wrapper" hidden>
              <img id="preview-img" alt="Aper√ßu de l‚Äôimage choisie" />
            </div>
          </div>

          <!-- üîó Bloc URL (cach√© au d√©but) -->
          <div id="block-url" hidden>
            <h2>Coller un lien de produit</h2>
            <p class="hint">
              Colle ici le lien du produit (Jumia, Alibaba, Amazon, AliExpress, etc.).
            </p>

            <input
              id="url-input"
              type="text"
              placeholder="https://exemple.com/produit/123"
              class="primary-input"
            />
          </div>

          <!-- S√©lecteurs boutiques (communs aux deux modes) -->
          <div class="form-group">
            <label for="shop-select">Boutique / plateforme</label>
            <select id="shop-select">
              <!-- Recherche dans le catalogue local -->
              <option value="local">üß† Recherche produits (par image)</option>
              <!-- Si tu veux r√©activer les autres boutiques plus tard,
                   tu peux remettre les <option> ici -->
            </select>
          </div>

          <div class="form-group">
            <label for="local-shop-select">Filtrer le catalogue local</label>
            <select id="local-shop-select">
              <option value="">üåç Toutes les boutiques locales</option>
              <option value="jumia">üõí Jumia CI</option>
            </select>
          </div>

          <div class="form-group full-width hidden-custom-shop">
            <label for="custom-shop">Boutique personnalis√©e (optionnel)</label>
            <span class="label-hint">Exemple : monshop.com ou boutiqueXYZ</span>
            <input
              id="custom-shop"
              type="text"
              placeholder="Nom ou domaine de ta boutique locale"
            />
          </div>

          <!-- Boutons d'action -->
          <div class="actions-row">
            <!-- Bouton utilis√© pour les deux modes (image / url) -->
            <button id="analyse-btn" class="primary">
              Analyser
            </button>
            <div id="loader" class="loader" hidden></div>
            <p id="error-text" class="error-text" hidden></p>
          </div>

          <!-- R√©sultat -->
          <section class="card" id="result-card" hidden>
            <h2>R√©sultat de l‚Äôanalyse</h2>

            <p class="result-description" id="result-description">
              Description du produit‚Ä¶
            </p>

            <div class="result-meta">
              <span class="badge" id="result-shop">Boutique : -</span>
              <span class="badge" id="result-country">Pays : -</span>
              <span class="badge badge-soft" id="result-source">Source : -</span>
            </div>

            <!-- Zone catalogue local -->
            <div id="local-results" class="local-results"></div>
<!-- Bloc infos PRODUIT (pour mode URL) -->
  <div id="url-product-block" class="url-extra-block" hidden>
    <h3>Infos produit</h3>
    <p id="url-product-title" class="url-product-title"></p>
    <p id="url-product-price" class="url-product-price"></p>
    <p id="url-product-rating" class="url-product-rating"></p>
  </div>

  <!-- Bloc infos FOURNISSEUR (pour mode URL) -->
  <div id="url-supplier-block" class="url-extra-block" hidden>
    <h3>Infos fournisseur</h3>
    <p id="url-supplier-name" class="url-supplier-name"></p>
    <p id="url-supplier-country" class="url-supplier-country"></p>
    <p id="url-supplier-delivery" class="url-supplier-delivery"></p>
    <p id="url-supplier-extra" class="url-supplier-extra"></p>
  </div>
            <!-- Lien vers boutiques externes -->
            <a
              id="result-link"
              href="#"
              target="_blank"
              class="result-link"
            >
              Voir les offres similaires üîó
            </a>
          </section>
        </section>

        <!-- Historique -->
        <section class="card history-card">
          <div class="history-header">
            <h2>Historique r√©cent</h2>
            <button id="clear-history" class="link-button">Effacer</button>
          </div>
          <div id="history-list" class="history-list empty">
            <p class="history-empty">
              Aucune analyse encore. Lance ta premi√®re v√©rification üëá
            </p>
          </div>
        </section>
      </main>

  <footer class="app-footer">
    <small>ProdyScan ‚Ä¢ Analyse d‚Äôimages avec OCR</small>
  </footer>

</div>

<script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>