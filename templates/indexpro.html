<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Aliscan Pro - Analyse & Calcul de co√ªt</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link
    rel="stylesheet"
    href="{{ url_for('static', filename='style.css') }}"
  />
</head>

<body>
  <div class="app">

    <!-- ==========================
         HEADER
    =========================== -->
    <header class="app-header">
      <div class="logo-circle">A</div>
      <div class="header-texts">
        <h1>Aliscan Pro</h1>
        <p class="subtitle">
          Analyse de lien produit, calcul de co√ªt et conversion de devise.
        </p>
      </div>
    </header>

    <!-- ==========================
         MAIN
    =========================== -->
    <main class="app-main">

      <!-- ==========================
           MENU PRINCIPAL
      =========================== -->
      <div class="menu-wrapper">
        <button id="menu-toggle" class="menu-toggle">
          ‚ò∞ Menu
        </button>

        <nav id="main-menu" class="main-menu menu-closed">
          <button class="menu-btn menu-btn-active" data-screen="screen-analyse">
            üîç Analyse de lien
          </button>
          <button class="menu-btn" data-screen="screen-calc">
            üí∞ Calculateur de co√ªt
          </button>
          <button class="menu-btn" data-screen="screen-conv">
            üí± Conversion de devise
          </button>
        </nav>
      </div>

      <!-- ==========================
           √âCRAN 1 : ANALYSE DE LIEN
      =========================== -->
      <section id="screen-analyse" class="screen">

        <!-- Carte principale : saisie du lien -->
        <section class="card">
          <h2 class="card-title">Analyse de lien produit</h2>
          <p class="hint">
            Colle ici le lien d‚Äôun produit (Alibaba, Jumia, Amazon, AliExpress, etc.).
          </p>

          <div class="form-group">
            <input
              id="url-input"
              type="text"
              class="primary-input"
              placeholder="https://exemple.com/produit/123"
            />
          </div>

          <p class="hint small">
            Appuie ensuite sur <strong>¬´ Analyser le lien ¬ª</strong> pour r√©cup√©rer
            les infos principales du produit et du fournisseur.
          </p>

          <div class="actions-row">
            <button id="analyse-btn" class="primary-btn">
              üîó Analyser le lien
            </button>
            <div id="loader" class="loader" hidden></div>
          </div>

          <p id="error-text" class="error-text" hidden></p>
        </section>

        <!-- R√©sultat de l‚Äôanalyse -->
        <section id="result-card" class="card result-card" hidden>
          <h2 class="card-title">R√©sultat de l‚Äôanalyse</h2>

          <p id="result-title" class="result-title">
            Produit analys√©‚Ä¶
          </p>

          <div class="result-meta">
            <span id="result-shop" class="badge">Boutique : -</span>
            <span id="result-country" class="badge">Pays : -</span>
            <span id="result-source" class="badge badge-soft">Source : -</span>
          </div>

          <!-- Infos produit -->
          <div id="product-block" class="info-block" hidden>
            <div class="info-block-header">
              <span class="info-icon">üì¶</span>
              <h3>Infos produit</h3>
            </div>
            <p id="product-title" class="info-main-line"></p>
            <p id="product-price" class="info-line"></p>
            <p id="product-extra" class="info-line"></p>
            <p id="product-ranges" class="info-line small"></p>
          </div>

          <!-- Infos fournisseur -->
          <div id="supplier-block" class="info-block" hidden>
            <div class="info-block-header">
              <span class="info-icon">üè≠</span>
              <h3>Infos fournisseur</h3>
            </div>
            <p id="supplier-name" class="info-main-line"></p>
            <p id="supplier-line1" class="info-line"></p>
            <p id="supplier-line2" class="info-line"></p>
            <p id="supplier-line3" class="info-line"></p>
            <p id="supplier-extra" class="info-line small"></p>
          </div>

          <!-- Liens externes -->
          <div class="result-links">
            <a
              id="result-link"
              href="#" target="_blank"
              class="secondary-btn"
            >
              üîó Ouvrir la page produit
            </a>

            <a
              id="supplier-link"
              href="#"
              target="_blank"
              class="ghost-btn"
              hidden
            >
              üßæ Voir le profil fournisseur
            </a>
          </div>
        </section>

        <!-- Historique des analyses -->
        <section class="card history-card">
          <div class="history-header">
            <h2>Historique des liens analys√©s</h2>
            <button id="clear-history" class="link-button">Effacer</button>
          </div>
          <div id="history-list" class="history-list empty">
            <p class="history-empty">
              Aucun lien analys√© pour l‚Äôinstant. Colle un lien ci-dessus pour commencer üëÜ
            </p>
          </div>
        </section>

      </section>

      <!-- ==========================
           √âCRAN 2 : CALCULATEUR DE CO√õT
      =========================== -->
      <section id="screen-calc" class="screen" hidden>

        <!-- Carte calculateur -->
        <section class="card calc-card">
          <h2 class="card-title">Calculateur de co√ªt</h2>
          <p class="hint">
            Choisis une seule devise (XOF, USD, EUR‚Ä¶). 
            <strong>Tous les montants doivent √™tre saisis dans cette m√™me devise.</strong>
          </p>

          <!-- Infos optionnelles -->
          <div class="form-row">
            <div class="form-group">
              <label for="calc-product-name">Nom du produit (optionnel)</label>
              <input
                id="calc-product-name"
                type="text"
                class="primary-input"
                placeholder="Ex : Casque Bluetooth"
              />
            </div>
            <div class="form-group">
              <label for="calc-supplier-name">Nom du fournisseur (optionnel)</label>
              <input
                id="calc-supplier-name"
                type="text"
                class="primary-input"
                placeholder="Ex : Fournisseur habituel"
              />
            </div>
          </div>

          <div class="form-group">
            <label for="calc-supplier-link">Lien du fournisseur (optionnel)</label>
            <input
              id="calc-supplier-link"
              type="text"
              class="primary-input"
              placeholder="https://exemple.com/boutique"
            />
            <p class="hint small">
              Si tu renseignes ce champ, le lien sera cliquable dans l‚Äôhistorique des calculs.
            </p>
          </div>

          <!-- Devise -->
          <div class="form-group">
            <label for="calc-currency">Devise utilis√©e</label>
            <input
              id="calc-currency"
              type="text"
              class="primary-input"
              value="XOF"
            />
            <p class="hint small">Ex : XOF, USD, EUR, NGN‚Ä¶</p>
            <p id="calc-currency-info" class="hint small">
              Tous les montants ci-dessous doivent √™tre saisis en XOF.
            </p>
          </div>

          <hr class="divider" />

          <!-- PRODUITS -->
          <h3 class="section-subtitle">Produits</h3>

          <!-- S√©lecteur de mode -->
          <div class="form-group">
            <label>Mode de calcul</label>
            <div class="radio-row calc-mode-row">
              <label>
                <input type="radio" name="calc-mode" value="total" checked />
                Montant total fournisseur
              </label>
              <label>
                <input type="radio" name="calc-mode" value="detail" />
                Prix unitaire + quantit√©
              </label>
            </div>
          </div>

          <!-- MODE A : Montant total -->
          <div id="calc-mode-total" class="calc-mode-panel">
            <div class="form-group">
              <label for="calc-products-total">
                Montant total donn√© par le fournisseur
              </label>
              <input
                id="calc-products-total"
                type="number"
                step="0.01"
                class="primary-input"
                placeholder="Ex : 200 000"
              />
              <p class="hint small">
                Utilise ce mode si ton fournisseur te donne un seul montant global.
                Laisse livraison locale et transport √† 0 si tout est d√©j√† inclus.
              </p>
            </div>
          </div>

          <!-- MODE B : Prix unitaire + quantit√© -->
          <div id="calc-mode-detail" class="calc-mode-panel" hidden>
            <p class="hint small">
              Ici tu d√©composes : prix d‚Äôune pi√®ce √ó quantit√©.
            </p>
            <div class="form-row">
              <div class="form-group">
                <label for="calc-price-unit">Prix unitaire</label>
                <input
                  id="calc-price-unit"
                  type="number"
                  step="0.01"
                  class="primary-input"
                  placeholder="Ex : 2 500"
                />
              </div>
              <div class="form-group">
                <label for="calc-qty">Quantit√©</label>
                <input
                  id="calc-qty"
                  type="number"
                  step="1"
                  class="primary-input"
                  placeholder="Ex : 200"
                />
              </div>
            </div>
          </div>

          <!-- Livraison locale -->
          <h3 class="section-subtitle">Livraison locale</h3>
          <div class="form-group">
            <label for="calc-local-delivery">
              Fournisseur ‚Üí Transporteur(optionnel)
            </label>
            <input
              id="calc-local-delivery"
              type="number"
              step="0.01"
              class="primary-input"
              placeholder="Ex : 25 000"
            />
          </div>

          <!-- Transport international -->
          <h3 class="section-subtitle">Transport international</h3>
          <div class="form-group">
            <label>Mode de transport</label>
            <div class="radio-row">
              <label>
                <input type="radio" name="calc-ship-mode" value="kg" checked />
                Par kg
              </label>
              <label>
                <input type="radio" name="calc-ship-mode" value="cbm" />
                Par CBM
              </label>
              <label>
                <input type="radio" name="calc-ship-mode" value="fixe" />
                Montant fixe
              </label>
            </div>
          </div>

          <div id="calc-ship-kg" class="form-row">
            <div class="form-group">
              <label for="calc-price-per-kg">Transport (par kg)</label>
              <input
                id="calc-price-per-kg"
                type="number"
                step="0.01"
                class="primary-input"
                placeholder="Ex : 2 500"
              />
            </div>
            <div class="form-group">
              <label for="calc-weight-kg">Poids total (kg)</label>
              <input
                id="calc-weight-kg"
                type="number"
                step="0.01"
                class="primary-input"
                placeholder="Ex : 120"
              />
            </div>
          </div>

          <div id="calc-ship-cbm" class="form-row" style="display: none;">
            <div class="form-group">
              <label for="calc-price-per-cbm">Transport (par CBM)</label>
              <input
                id="calc-price-per-cbm"
                type="number"
                step="0.01"
                class="primary-input"
                placeholder="Ex : 150 000"
              />
            </div>
            <div class="form-group">
              <label for="calc-volume-cbm">Volume total (CBM)</label>
              <input
                id="calc-volume-cbm"
                type="number"
                step="0.01"
                class="primary-input"
                placeholder="Ex : 1.8"
              />
            </div>
          </div>

          <div id="calc-ship-fixe" class="form-row" style="display: none;">
            <div class="form-group">
              <label for="calc-ship-fixed">Montant fixe</label>
              <input
                id="calc-ship-fixed"
                type="number"
                step="0.01"
                class="primary-input"
                placeholder="Ex : 720 000"
              />
            </div>
          </div>

          <!-- Taxes -->
          <h3 class="section-subtitle">Taxes / Douane</h3>
          <div class="form-group">
            <label for="calc-taxes">
              Taxes (%) <span class="hint small">(optionnel)</span>
            </label>
            <input
              id="calc-taxes"
              type="number"
              step="0.01"
              class="primary-input"
              placeholder="Ex : 30"
            />
          </div>

          <!-- Boutons actions -->
          <div class="actions-row">
            <button id="calc-run" type="button" class="primary-btn">
              üí∞ Calculer le total
            </button>
            <button id="calc-reset" type="button" class="secondary-btn">
              ‚ôªÔ∏è Remise √† z√©ro
            </button>
          </div>

          <!-- R√©sultat -->
          <div id="calc-result" class="calc-result" hidden>
            <h3>R√©sultat du calcul</h3>
            <p id="calc-line-products"></p>
            <p id="calc-line-local"></p>
            <p id="calc-line-shipping"></p>
            <p id="calc-line-total-local"></p>
            <p id="calc-line-taxes"></p>
            <p id="calc-line-final" class="calc-total-final"></p>
          </div>
        </section>

        <!-- Historique des calculs -->
        <section class="card history-card">
          <div class="history-header">
            <h2>Historique des calculs</h2>
            <button id="clear-calc-history" class="link-button">Effacer</button>
          </div>
          <div id="calc-history-list" class="history-list empty">
            <p class="history-empty">
              Aucun calcul enregistr√© pour l‚Äôinstant. Fais un calcul pour le voir ici üëá
            </p>
          </div>
        </section>

      </section>

      <!-- ==========================
           √âCRAN 3 : CONVERTISSEUR GOOGLE
      =========================== -->
      <section id="screen-conv" class="screen" hidden>
        <section class="card calc-card">
          <h2 class="card-title">Conversion de devise (Google)</h2>
          <p class="hint">
            Utilise ce module pour consulter rapidement le taux du jour sur Google.
            Tu pourras ensuite utiliser ce taux dans ton calculateur.
          </p>

          <div class="form-row">
            <div class="form-group">
              <label for="google-from">Devise de d√©part</label>
              <input
                id="google-from"
                type="text"
                class="primary-input"
                value="USD"
              />
              <p class="hint small">Ex : USD, CNY, EUR‚Ä¶</p>
            </div>

            <div class="form-group">
              <label for="google-to">Devise d‚Äôarriv√©e</label>
              <input
                id="google-to"
                type="text"
                class="primary-input"
                value="XOF"
              />
              <p class="hint small">Ex : XOF, NGN, EUR‚Ä¶</p>
            </div>
          </div>

          <div class="actions-row">
            <button id="google-rate-btn" class="google-rate-btn">
              üîé Voir le taux du jour sur Google
            </button>
          </div>
        </section>
      </section>

    </main>

    <!-- ==========================
         FOOTER
    =========================== -->
    <footer class="app-footer">
      <small>Aliscan Pro ‚Ä¢ Analyse de lien, calcul de co√ªt & conversion de devise</small>
    </footer>

  </div>

  <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>