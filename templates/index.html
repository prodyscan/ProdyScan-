<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>ProdyScan</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link
    rel="stylesheet"
    href="{{ url_for('static', filename='style.css') }}"
  />
</head>
<body>
  <div class="app">
    <header class="app-header">
      <div class="logo-circle">P</div>
      <div>
        <h1>ProdyScan</h1>
        <!-- Texte dâ€™accueil masquÃ© -->
      </div>
    </header>

    <main class="app-main">
      <!-- Bloc image -->
      <section class="card">
  <h2>1. Choisir ou prendre une photo</h2>
  <p class="hint">
    Utilise de prÃ©fÃ©rence une photo bien cadrÃ©e du produit ou de son emballage.
  </p>

  <!-- Input cachÃ© -->
  <input
    id="file-input"
    type="file"
    accept="image/*"
    capture="environment"
    hidden
  />

  <!-- Bouton visible -->
  <button id="choose-image-btn" type="button" class="primary-btn">
    Choisir / Prendre une photo
  </button>

  <!-- Nom de fichier -->
  <p id="file-label" class="file-label">
    Aucune image sÃ©lectionnÃ©e
  </p>
</section>
        <div class="form-grid">
          <div class="form-group">
            <label for="country-select">Pays cible</label>
            <select id="country-select">
              <option value="global">ğŸŒ Global</option>
              <option value="civ">ğŸ‡¨ğŸ‡® CÃ´te dâ€™Ivoire</option>
              <option value="sen">ğŸ‡¸ğŸ‡³ SÃ©nÃ©gal</option>
              <option value="cmr">ğŸ‡¨ğŸ‡² Cameroun</option>
              <option value="maroc">ğŸ‡²ğŸ‡¦ Maroc</option>
              <option value="tunisie">ğŸ‡¹ğŸ‡³ Tunisie</option>
              <option value="france">ğŸ‡«ğŸ‡· France</option>
              <option value="algerie">ğŸ‡©ğŸ‡¿ AlgÃ©rie</option>
              <option value="mali">ğŸ‡²ğŸ‡± Mali</option>
            </select>
          </div>

          <div class="form-group">
            <label for="shop-select">Boutique / plateforme</label>
            <select id="shop-select">
              <option value="google">ğŸ” Google (par dÃ©faut)</option>
              <option value="jumia">ğŸ›’ Jumia</option>
              <option value="amazon">ğŸ“¦ Amazon</option>
              <option value="aliexpress">ğŸ› AliExpress</option>
              <option value="ebay">ğŸŒ€ eBay</option>
              <option value="cdiscount">ğŸ‡«ğŸ‡· Cdiscount</option>
              <option value="alibaba">ğŸ­ Alibaba</option>
              <option value="custom">â­ Boutique personnalisÃ©e (champ ci-dessous)</option>
            </select>
          </div>

          <div class="form-group full-width">
            <label for="custom-shop">
              Boutique personnalisÃ©e (optionnel)
              <span class="label-hint">
                Exemple : <code>monshop.com</code> ou <code>boutiqueXYZ</code>
              </span>
            </label>
            <input
              id="custom-shop"
              type="text"
              placeholder="Nom ou domaine de ta boutique locale"
            />
          </div>
        </div>

        <div class="actions-row">
          <button id="analyse-btn" class="primary">Analyser lâ€™image</button>
        </div>
      </section>

      <!-- RÃ©sultat -->
      <section class="card" id="result-card" hidden>
        <h2>RÃ©sultat de lâ€™analyse</h2>

        <p class="result-description" id="result-description">
          Description du produitâ€¦
        </p>

        <div class="result-meta">
          <span class="badge" id="result-shop">Boutique : -</span>
          <span class="badge" id="result-country">Pays : -</span>
          <span class="badge badge-soft" id="result-source">Source : -</span>
        </div>

        <a id="result-link" href="#" target="_blank" class="result-link">
          Voir les offres similaires ğŸ”—
        </a>
      </section>

      <!-- Historique -->
      <section class="card history-card">
        <div class="history-header">
          <h2>Historique rÃ©cent</h2>
          <button id="clear-history" class="link-button">Effacer</button>
        </div>
        <div id="history-list" class="history-list empty">
          <p class="history-empty">
            Aucune analyse encore. Lance ta premiÃ¨re vÃ©rification ğŸ‘‡
          </p>
        </div>
      </section>
    </main>

    <footer class="app-footer">
      <small>
        ProdyScan â€¢ Analyse dâ€™images avec OCR
        {% if has_openai %} + OpenAI Vision{% else %}(Vision dÃ©sactivÃ©e){% endif %}
      </small>
    </footer>
  </div>

  <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
